<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>V13 Hit Compare Dashboard</title>
<style>
body{background:#0a0f18;color:#00ffd0;font-family:monospace;padding:20px}
.container{max-width:1300px;margin:auto}
textarea,button{width:100%;margin-top:10px;padding:10px;border-radius:6px;border:none;font-family:monospace}
textarea{background:#111;color:#fff;height:220px}
button{background:#00ffd0;color:#000;font-weight:bold;cursor:pointer}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}
.card{background:#111;padding:15px;border-radius:6px}
.score{font-size:22px;color:#00ff88}
.rank{font-size:18px;color:#ffd700}
</style>
</head>
<body>
<div class="container">

<h1>ðŸŽ› V13 â€“ Multi Artist Hit Compare Dashboard</h1>

<textarea id="lyrics" placeholder="Paste full structured lyrics with [Chorus]..."></textarea>

<button onclick="compareAll()">ðŸ“Š Compare 4 Artist Versions</button>

<div id="dashboard"></div>

</div>

<script>

function extractChorus(text){
let lines=text.split("\n");
let chorus=[];
let inChorus=false;

for(let line of lines){
if(line.includes("[Chorus]")){inChorus=true;continue;}
if(line.startsWith("[") && inChorus){break;}
if(inChorus && line.trim()!=""){chorus.push(line);}
}
return chorus.join(" ");
}

function scoreVersion(text,market){

let words=text.split(/\s+/);
let unique=new Set(words);
let repetition=words.length-unique.size;

let powerWords=["love","forever","fire","heart","higher","à¸£à¸±à¸","à¹ƒà¸ˆ","à¸•à¸¥à¸­à¸”à¹„à¸›"];
let powerScore=words.filter(w=>powerWords.includes(w.toLowerCase())).length;

let hookPower=Math.min(25,words.length/2);
let repetitionScore=Math.min(25,repetition*3);
let emotionScore=Math.min(25,powerScore*5);

let marketFit=market==="TH"?20:22;

let total=hookPower+repetitionScore+emotionScore+marketFit;

return {
hookPower,
repetitionScore,
emotionScore,
marketFit,
total:Math.round(total)
};
}

function compareAll(){

let text=document.getElementById("lyrics").value;
let chorus=extractChorus(text);

if(!chorus){
document.getElementById("dashboard").innerHTML="No [Chorus] detected.";
return;
}

let versions={
"TH Male":chorus+" à¸£à¸±à¸à¹€à¸˜à¸­à¸ªà¸¸à¸”à¹ƒà¸ˆ",
"TH Female":chorus+" à¸£à¸±à¸à¹€à¸˜à¸­à¸«à¸¡à¸”à¹ƒà¸ˆà¸•à¸¥à¸­à¸”à¹„à¸›",
"EN Male":chorus+" forever stronger higher",
"EN Female":chorus+" burning brighter forever"
};

let results=[];

for(let name in versions){

let market=name.includes("TH")?"TH":"EN";
let score=scoreVersion(versions[name],market);

results.push({
name,
...score
});
}

results.sort((a,b)=>b.total-a.total);

let output="<div class='grid'>";

results.forEach((r,index)=>{

output+=`
<div class="card">
<div class="rank">Rank ${index+1}</div>
<strong>${r.name}</strong>
<div class="score">${r.total}/100</div>
Hook Power: ${r.hookPower}/25<br>
Repetition: ${r.repetitionScore}/25<br>
Emotion: ${r.emotionScore}/25<br>
Market Fit: ${r.marketFit}/25
</div>
`;
});

output+="</div>";

document.getElementById("dashboard").innerHTML=output;

}

</script>
</body>
</html>
