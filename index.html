<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DNA Song Generator</title>

<meta name="theme-color" content="#0f0f14">

<link rel="manifest" href="manifest.json">

<style>
body{
  font-family:Arial, sans-serif;
  background:#0f0f14;
  color:white;
  padding:20px;
}
h1{margin-top:0}
input,select,button,textarea{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:10px;
  border:none;
}
button{
  background:#ff0077;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
button:hover{background:#ff3399;}
textarea{
  height:140px;
  background:#1b1b25;
  color:#00ffcc;
}
.install{
  background:#00c896;
}
.section{
  margin-top:20px;
  background:#1a1a22;
  padding:15px;
  border-radius:12px;
}
</style>
</head>
<body>

<h1>ðŸŽµ DNA Song Generator</h1>

<button id="installBtn" class="install" style="display:none;">
Install App
</button>

<input id="artist" placeholder="Reference Artist">
<select id="mood">
<option>Disco Energetic</option>
<option>Romantic Groove</option>
<option>Dark Synth</option>
<option>Emotional Anthem</option>
</select>

<button onclick="generateSong()">Generate Song</button>

<div class="section">
<h3>Title</h3>
<textarea id="title"></textarea>
</div>

<div class="section">
<h3>Style</h3>
<textarea id="style"></textarea>
</div>

<div class="section">
<h3>Lyrics</h3>
<textarea id="lyrics"></textarea>
</div>

<script>
function random(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

function generateSong(){
  const artist = document.getElementById("artist").value;
  const mood = document.getElementById("mood").value;

  const words = ["Midnight","Neon","Fever","Shadow","Heartbeat","Electric","Starlight"];
  const title = random(words)+" "+random(words);

  const style =
`Inspired by: ${artist}
Mood: ${mood}
Tempo: 110-118 BPM
Structure: Intro â€“ Verse â€“ Pre-Chorus â€“ Chorus â€“ Bridge â€“ Final Chorus
Production: Wide stereo harmony, groovy bass, dynamic chorus lift`;

  const lyrics =
`[Verse]
City lights calling your name
Heartbeat dancing in flame

[Chorus]
${title}
Burning in the night
Higher and higher
Into the light`;

  document.getElementById("title").value = title;
  document.getElementById("style").value = style;
  document.getElementById("lyrics").value = lyrics;

  // Auto Save to LocalStorage
  localStorage.setItem("dnaSong", JSON.stringify({title,style,lyrics}));
}

// Load saved song automatically
window.onload = function(){
  const saved = localStorage.getItem("dnaSong");
  if(saved){
    const data = JSON.parse(saved);
    document.getElementById("title").value = data.title;
    document.getElementById("style").value = data.style;
    document.getElementById("lyrics").value = data.lyrics;
  }
};

/* Install Button */
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt",(e)=>{
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async ()=>{
  installBtn.style.display = "none";
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  deferredPrompt = null;
});
</script>

</body>
</html>
